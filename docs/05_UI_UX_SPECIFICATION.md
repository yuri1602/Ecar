# UI/UX Спецификация

## 🎨 Design Principles

### Основни принципи
- **Простота:** Лесен и интуитивен интерфейс за всички роли
- **Mobile-First:** Оптимизация за мобилни устройства (шофьорите)
- **Бърз достъп:** Минимален брой кликове до основните функции
- **Визуална йерархия:** Ясно разделение между различните секции
- **Feedback:** Моментална обратна връзка при всяко действие

### Цветова палитра

```
Primary (Electric Blue): #2196F3
Secondary (Green): #4CAF50
Warning (Orange): #FF9800
Danger (Red): #F44336
Success (Green): #4CAF50

Neutral:
- Gray 50: #FAFAFA
- Gray 100: #F5F5F5
- Gray 200: #EEEEEE
- Gray 300: #E0E0E0
- Gray 700: #616161
- Gray 900: #212121

Text:
- Primary: #212121
- Secondary: #757575
- Disabled: #BDBDBD
```

## 📱 Layout структура

### Header (Fixed Top)

```
┌─────────────────────────────────────────────────────────────┐
│  🚗 ECar Fleet       [Search]       👤 Admin  🔔(2)  ⚙️      │
└─────────────────────────────────────────────────────────────┘
```

### Sidebar Navigation (Desktop)

```
┌──────────────────────┐
│  🏠 Dashboard        │
│  🚗 Автомобили       │
│  ⚡ Зарежда��ия       │
│  📊 Отчети           │
│  👥 Потребители      │  (Admin/Manager only)
│  🔧 Настройки        │  (Admin only)
│  ━━━━━━━━━━━━━━━     │
│  📖 Помощ            │
│  🚪 Изход            │
└──────────────────────┘
```

### Mobile Navigation (Bottom Bar)

```
┌─────────────────────────────────────────────────────────────┐
│           [Content Area]                                    │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│   🏠        🚗        ⚡        📊        👤                  │
│   Начало   Коли   Зарежд.   Отчети    Профил               │
└─────────────────────────────────────────────────────────────┘
```

## 🖥️ Admin Panel

### 1. Admin Dashboard

#### Wireframe

```
┌─────────────────────────────────────────────────────────────┐
│  Dashboard                                    [Период: ▼]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │ 💰 Разход   │  │ ⚡ Енергия  │  │ 🚗 Сесии    │        │
│  │ 1,234 лв.   │  │ 456 kWh     │  │ 23          │        │
│  │ +12% ↑      │  │ +5% ↑       │  │ -2 ↓        │        │
│  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 Разход по месеци                                │   │
│  │  [Bar Chart]                                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌────────────────────────┐  ┌────────────────────────┐   │
│  │ ⚠️ Pending одометри    │  │ 🏆 Топ автомобили      │   │
│  │ • CA1234AB  (24h)      │  │ 1. CA5678CD  450 лв.   │   │
│  │ • CA5678CD  (12h)      │  │ 2. CA1234AB  380 лв.   │   │
│  │ [Вижте всички →]       │  │ 3. CA9012EF  320 лв.   │   │
│  └────────────────────────┘  └────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

#### Компоненти

**KPI Cards:**
```tsx
<KPICard
  icon="💰"
  title="Общ разход"
  value="1,234 лв."
  change="+12%"
  changeType="increase"
  period="месец"
/>
```

**Charts:**
- Bar chart за разход по месеци (Recharts)
- Line chart за потребление (kWh)
- Pie chart за разход по автомобили

**Alerts Panel:**
- Pending одометри (брой и възраст)
- Неуспешни нотификации
- Автомобили в поддръжка

### 2. Списък Автомобили

```
┌─────────────────────────────────────────────────────────────┐
│  Автомобили                   [+ Нов автомобил]  [Филтри▼] │
├─────────────────────────────────────────────────────────────┤
│  🔍 Търсене по рег. номер, марка...                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🚗 CA1234AB                             [✏️] [📊]    │   │
│  │ Tesla Model 3 • 2022                                │   │
│  │ Батерия: 75 kWh  |  Статус: ✅ Активен              │   │
│  │ Шофьор: Георги Стоянов                              │   │
│  │ Последно: 45,234 км (27.11.2025)                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🚗 CA5678CD                             [✏️] [📊]    │   │
│  │ Nissan Leaf • 2021                                  │   │
│  │ Батерия: 40 kWh  |  Статус: 🔧 Поддръжка            │   │
│  │ Шофьор: -                                           │   │
│  │ Последно: 32,100 км (20.11.2025)                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  [1] 2 3 4 5 ... 10  →                                     │
└─────────────────────────────────────────────────────────────┘
```

#### Функционалност

- **Търсене:** Real-time search по рег. номер, марка, модел
- **Филтри:** Статус (активен/поддръжка/пенсиониран), марка, година
- **Сортиране:** По рег. номер, последно зареждане, разход
- **Бързи действия:** 
  - ✏️ Редактиране
  - 📊 Преглед на статистики
  - 👤 Управление на шофьори

### 3. Ново зареждане (Форма)

```
┌─────────────────────────────────────────────────────────────┐
│  Ново зареждане                                      [✕]    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  * Автомобил                                                │
│  [Изберете автомобил... ▼]                                  │
│    CA1234AB - Tesla Model 3                                 │
│    CA5678CD - Nissan Leaf                                   │
│    ...                                                      │
│                                                             │
│  * Дата и час на зареждане                                  │
│  [27.11.2025] [14:30]                                       │
│                                                             │
│  * Край на зареждане                                        │
│  [27.11.2025] [15:45]                                       │
│  ⏱️ Продължителност: 1ч 15мин                               │
│                                                             │
│  * Заредени kWh                                             │
│  [45.5] kWh                                                 │
│                                                             │
│  * Обща цена                                                │
│  [18.20] BGN                                                │
│  💡 Цена за kWh: 0.40 лв.                                   │
│                                                             │
│  Станция (опция)                                            │
│  [Изберете станция... ▼]                                    │
│                                                             │
│  Тарифа (опция)                                             │
│  [Изберете тарифа... ▼]                                     │
│                                                             │
│  Бележки                                                    │
│  [____________________________________________________]     │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ℹ️ След запис ще бъде изпратена нотификация до      │   │
│  │    шофьора за въвеждане на одометър.                │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│                              [Отказ]  [Запази и изпрати]   │
└─────────────────────────────────────────────────────────────┘
```

#### Валидации (Real-time)

```tsx
// Пример за валидационна логика
const validationRules = {
  vehicleId: {
    required: "Моля изберете автомобил"
  },
  startedAt: {
    required: "Моля въведете дата и час",
    max: new Date(), // Не в бъдещето
    maxPastDays: 30 // Не повече от 30 дни назад
  },
  endedAt: {
    required: "Моля въведете край на зареждане",
    min: (value, formData) => value >= formData.startedAt
  },
  kwhCharged: {
    required: "Моля въведете kWh",
    min: 0.1,
    max: (value, formData) => {
      const vehicle = getVehicle(formData.vehicleId);
      return vehicle.batteryCapacity * 1.2; // 120% от капацитета
    }
  },
  priceTotal: {
    required: "Моля въведете цена",
    min: 0
  }
};
```

### 4. Списък зарядни сесии

```
┌─────────────────────────────────────────────────────────────┐
│  Зарядни сесии              [+ Ново]  [Филтри▼]  [Експорт] │
├─────────────────────────────────────────────────────────────┤
│  Период: [01.11.2025] до [30.11.2025]  Автомобил: [Всички▼]│
│  Статус: [✅Завършени] [⏳Pending] [❌Отказани]              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 📅 27.11.2025 14:30  |  CA1234AB  |  ⏳ Pending одометър ││
│  │ ⚡ 45.5 kWh  |  💰 18.20 лв.  |  📍 ЕВН София Център     ││
│  │ Създадено от: Иван Петров  |  Преди 2 часа             ││
│  │ 👤 Очаква: Георги Стоянов                              ││
│  │                                     [✏️] [✉️] [❌]       ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 📅 26.11.2025 09:15  |  CA5678CD  |  ✅ Завършена       ││
│  │ ⚡ 32.0 kWh  |  💰 12.80 лв.  |  📍 Petrol EV Младост   ││
│  │ 🚗 Изминати: 180 км  |  📊 17.8 kWh/100км  |  7.11лв/100км││
│  │ Одометър: 32,100 км (въведен от Мария Димитрова)       ││
│  │                                     [👁️] [📊]            ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  [◄] [1] 2 3 4 ... 10 [►]              Показани: 1-20 от 185│
└─────────────────────────────────────────────────────────────┘
```

#### Status Badges

```tsx
const statusBadges = {
  pending_odometer: {
    icon: '⏳',
    color: 'warning',
    label: 'Pending одометър'
  },
  completed: {
    icon: '✅',
    color: 'success',
    label: 'Завършена'
  },
  cancelled: {
    icon: '❌',
    color: 'danger',
    label: 'Отказана'
  }
};
```

## 📱 Driver Portal

### 1. Driver Dashboard

```
┌─────────────────────────────────────────────────────────────┐
│  Добре дошли, Георги! 👋                                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ⚠️ Имате 2 зарядни сесии, чакащи одометър!                 │
│  [Въведете сега →]                                          │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  Вашите автомобили                                  │   │
│  │                                                     │   │
│  │  🚗 CA1234AB - Tesla Model 3                        │   │
│  │  └─ Последно: 45,234 км (27.11.2025)                │   │
│  │  └─ Разход: 16.2 kWh/100км | 6.48 лв/100км         │   │
│  │     [Вижте история →]                               │   │
│  │                                                     │   │
│  │  🚗 CA9012EF - VW ID.4                              │   │
│  │  └─ Последно: 12,580 км (25.11.2025)                │   │
│  │  └─ Разход: 18.5 kWh/100км | 7.40 лв/100км         │   │
│  │     [Вижте история →]                               │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 Вашата статистика (този месец)                  │   │
│  │  • Зарядни сесии: 8                                 │   │
│  │  • Общо изминати: 1,245 км                          │   │
│  │  • Общ разход: 210 лв.                              │   │
│  │  • Среден разход: 16.9 лв/100км                     │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 2. Отворени зарежданияПending Odometers)

```
┌─────────────────────────────────────────────────────────────┐
│  ⏳ Чакащи одометър                                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🚗 CA1234AB - Tesla Model 3                         │   │
│  │ 📅 27.11.2025, 14:30                                │   │
│  │ ⚡ 45.5 kWh  |  💰 18.20 лв.                         │   │
│  │ 📍 ЕВН София Център                                 │   │
│  │                                                     │   │
│  │ 📊 Последни известни километри: 45,234 км           │   │
│  │                                                     │   │
│  │ ⏱️ Преди 2 часа                                      │   │
│  │                                                     │   │
│  │              [Въведи одометър →]                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🚗 CA1234AB - Tesla Model 3                         │   │
│  │ 📅 26.11.2025, 08:00                                │   │
│  │ ⚡ 52.0 kWh  |  💰 20.80 лв.                         │   │
│  │ 📍 Petrol EV - Младост                              │   │
│  │                                                     │   │
│  │ 📊 Последни известни километри: 45,034 км           │   │
│  │                                                     │   │
│  │ ⏱️ Преди 1 ден  ⚠️ Моля въведете!                   │   │
│  │                                                     │   │
│  │              [Въведи одометър →]                    │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 3. Форма за въвеждане на одометър

#### Desktop версия

```
┌─────────────────────────────────────────────────────────────┐
│  Въвеждане на одометър                               [✕]    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  Информация за зареждането                          │   │
│  │                                                     │   │
│  │  🚗 Автомобил: CA1234AB - Tesla Model 3             │   │
│  │  📅 Дата: 27.11.2025, 14:30                         │   │
│  │  ⚡ Заредени: 45.5 kWh                              │   │
│  │  💰 Цена: 18.20 лв.                                 │   │
│  │  📍 Станция: ЕВН София Център                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 Последни известни километри                     │   │
│  │                                                     │   │
│  │         45,234 км                                   │   │
│  │                                                     │   │
│  │  (от 25.11.2025)                                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  * Текущи километри                                         │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  [45,______] км                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│  💡 Въведете показанието от табло на автомобила             │
│                                                             │
│  ✅ Изчислени показатели (preview):                         │
│  • Изминати: ~ 200 км                                       │
│  • Разход: ~ 22.8 kWh/100км                                 │
│  • Цена: ~ 9.10 лв/100км                                    │
│                                                             │
│  Бележки (опция)                                            │
│  [____________________________________________________]     │
│                                                             │
│                                  [Отказ]  [✓ Запази]       │
└─────────────────────────────────────────────────────────────┘
```

#### Mobile версия (Simplified)

```
┌──────────────────────────────┐
│ ←  Въвеждане на одометър     │
├──────────────────────────────┤
│                              │
│  🚗 CA1234AB                  │
│  Tesla Model 3                │
│                              │
│  📅 27.11.2025, 14:30         │
│  ⚡ 45.5 kWh  💰 18.20 лв.    │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  📊 Последни километри:       │
│     45,234 км                │
│     (25.11.2025)             │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  * Текущи километри          │
│  ┌────────────────────────┐  │
│  │  45,_________  км      │  │
│  └────────────────────────┘  │
│                              │
│  [🔢 Отвори клавиатура]      │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  ✅ Ще се изчисли:            │
│  • Изминати: ~ 200 км        │
│  • Разход енергия:           │
│    ~ 22.8 kWh/100км          │
│  • Разход пари:              │
│    ~ 9.10 лв/100км           │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  ┌────────────────────────┐  │
│  │   ✓ Запази одометър    │  │
│  └────────────────────────┘  │
│                              │
└──────────────────────────────┘
```

#### Success Screen

```
┌──────────────────────────────┐
│                              │
│        ✅ Успешно!            │
│                              │
│  Одометърът е записан         │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  📊 Изчислени показатели:     │
│                              │
│  Изминати километри:         │
│     200 км                   │
│                              │
│  Разход на енергия:          │
│     22.75 kWh/100км          │
│                              │
│  Разход на пари:             │
│     9.10 лв/100км            │
│                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━    │
│                              │
│  [Вижте детайли]             │
│  [Назад към списъка]         │
│                              │
└──────────────────────────────┘
```

### 4. История на зарежданията

```
┌─────────────────────────────────────────────────────────────┐
│  История - CA1234AB                        [Филтри▼]        │
├─────────────────────────────────────────────────────────────┤
│  Период: [Последните 30 дни ▼]                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📈 Обобщена статистика                                     │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐           │
│  │ 8 сесии    │  │ 1,245 км   │  │ 210 лв.    │           │
│  └────────────┘  └────────────┘  └────────────┘           │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  [Line Chart: Разход kWh/100км през времето]        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  Детайлна история:                                          │
│                                                             │
│  27.11.2025 │ 45.5 kWh │ 18.20 лв │ 200 км │ 22.8 │ 9.10   │
│  26.11.2025 │ 52.0 kWh │ 20.80 лв │ 280 км │ 18.6 │ 7.43   │
│  25.11.2025 │ 38.0 kWh │ 15.20 лв │ 215 км │ 17.7 │ 7.07   │
│  ...                                                        │
│                                                             │
│  [Експорт в Excel]                                          │
└─────────────────────────────────────────────────────────────┘
```

## 📊 Reports Page

```
┌─────────────────────────────────────────────────────────────┐
│  Отчети                                      [Експорт▼]     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Филтри:                                                    │
│  Период: [01.11.2025] до [30.11.2025]                       │
│  Автомобил: [Всички ▼]  Шофьор: [Всички ▼]                 │
│  Станция: [Всички ▼]                                        │
│                           [Приложи филтри] [Изчисти]        │
│                                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                             │
│  📊 Обобщена статистика                                     │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐        │
│  │ 45 зареждания│ │ 3,450 км     │ │ 1,234 лв.    │        │
│  └──────────────┘ └──────────────┘ └──────────────┘        │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐        │
│  │ 756 kWh      │ │ 18.2kWh/100км│ │ 7.28лв/100км │        │
│  └──────────────┘ └──────────────┘ └──────────────┘        │
│                                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                             │
│  📈 Визуализации                        [Изглед: ▼]         │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  [Bar Chart: Разход по автомобили]                  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  [Line Chart: Разход по дни]                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                             │
│  📋 Детайлна таблица                       [Експорт CSV]    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ Автомобил │ Дата    │ kWh  │ Цена │ км  │ kWh/100 │   │
│  │──────────────────────────────────────────────────── │   │
│  │ CA1234AB  │27.11.25 │ 45.5 │18.20 │200  │ 22.8    │   │
│  │ CA5678CD  │26.11.25 │ 32.0 │12.80 │180  │ 17.8    │   │
│  │ ...                                                 │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 🎨 UI Component Library

### Button Variants

```tsx
// Primary Action
<Button variant="primary" size="md">
  Запази
</Button>

// Secondary
<Button variant="secondary" size="md">
  Отказ
</Button>

// Danger
<Button variant="danger" size="sm">
  Изтрий
</Button>

// Icon Button
<IconButton icon={<PencilIcon />} aria-label="Редактирай" />
```

### Input Components

```tsx
// Text Input
<Input
  label="Име"
  placeholder="Въведете име"
  error="Полето е задължително"
  required
/>

// Number Input
<NumberInput
  label="Километри"
  min={0}
  step={1}
  suffix="км"
/>

// Select
<Select
  label="Автомобил"
  options={vehicles}
  placeholder="Изберете..."
/>

// Date/Time Picker
<DateTimePicker
  label="Дата на зареждане"
  value={date}
  onChange={setDate}
/>
```

### Data Display

```tsx
// Card
<Card>
  <CardHeader>
    <CardTitle>Заглавие</CardTitle>
  </CardHeader>
  <CardContent>
    Съдържание
  </CardContent>
</Card>

// Badge
<Badge variant="warning">Pending</Badge>
<Badge variant="success">Завършено</Badge>

// Alert
<Alert variant="info">
  <AlertIcon />
  <AlertTitle>Информация</AlertTitle>
  <AlertDescription>
    Това е информационно съобщение
  </AlertDescription>
</Alert>
```

## 📱 Responsive Breakpoints

```css
/* Tailwind CSS breakpoints */
sm: 640px   /* Mobile landscape */
md: 768px   /* Tablet */
lg: 1024px  /* Desktop */
xl: 1280px  /* Large desktop */
2xl: 1536px /* Extra large desktop */
```

### Mobile-First Approach

```tsx
// Example: Card that stacks on mobile, grid on desktop
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <KPICard />
  <KPICard />
  <KPICard />
</div>

// Sidebar: Hidden on mobile, visible on desktop
<aside className="hidden lg:block w-64">
  <Sidebar />
</aside>

// Mobile menu
<MobileMenu className="block lg:hidden" />
```

## ♿ Accessibility (A11y)

### Основни изисквания

- **Keyboard Navigation:** Всички функции достъпни с клавиатура
- **Screen Reader Support:** Правилни ARIA labels
- **Color Contrast:** Минимум WCAG AA (4.5:1)
- **Focus Indicators:** Ясни focus states
- **Error Messages:** Четими и свързани с полетата

```tsx
// Example: Accessible Form Field
<div>
  <label htmlFor="odometer" className="block mb-2">
    Текущи километри
    <span className="text-red-500" aria-label="задължително поле">*</span>
  </label>
  <input
    id="odometer"
    type="number"
    aria-required="true"
    aria-describedby="odometer-error odometer-help"
    aria-invalid={!!error}
  />
  {error && (
    <p id="odometer-error" role="alert" className="text-red-500 mt-1">
      {error}
    </p>
  )}
  <p id="odometer-help" className="text-gray-500 text-sm mt-1">
    Въведете показанието от таблото
  </p>
</div>
```

---

**Следваща стъпка:** Сигурност и RBAC
