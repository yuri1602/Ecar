# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ° Ğ·Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ĞµĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞµĞ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ğ°Ñ€Ğº

## ğŸ“ Ğ ĞµÑ„ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞŸÑ€ĞµĞ³Ğ»ĞµĞ´ Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USERS / CLIENTS                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Admin      â”‚  â”‚ Fleet Manager â”‚  â”‚   Driver     â”‚     â”‚
â”‚  â”‚   Desktop    â”‚  â”‚    Desktop    â”‚  â”‚   Mobile     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                 â”‚                   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WEB/REVERSE PROXY LAYER                  â”‚
â”‚                     (Nginx / Traefik)                       â”‚
â”‚                   - SSL Termination                         â”‚
â”‚                   - Static Assets                           â”‚
â”‚                   - Load Balancing                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                               â”‚
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND (SPA)     â”‚      â”‚   BACKEND API        â”‚
â”‚   ---------------    â”‚      â”‚   -------------      â”‚
â”‚   - React/Vue.js     â”‚      â”‚   - Node.js/NestJS   â”‚
â”‚   - TypeScript       â”‚      â”‚   OR                 â”‚
â”‚   - Tailwind CSS     â”‚      â”‚   - .NET Core        â”‚
â”‚   - React Query      â”‚      â”‚   OR                 â”‚
â”‚                      â”‚      â”‚   - Python/FastAPI   â”‚
â”‚   Pages:             â”‚      â”‚                      â”‚
â”‚   â€¢ Admin Dashboard  â”‚      â”‚   Modules:           â”‚
â”‚   â€¢ Vehicle Mgmt     â”‚      â”‚   â€¢ Auth & RBAC      â”‚
â”‚   â€¢ Session Entry    â”‚      â”‚   â€¢ Vehicle Service  â”‚
â”‚   â€¢ Driver Portal    â”‚â—„â”€â”€â”€â”€â–ºâ”‚   â€¢ Session Service  â”‚
â”‚   â€¢ Odometer Entry   â”‚      â”‚   â€¢ Odometer Service â”‚
â”‚   â€¢ Reports/Export   â”‚      â”‚   â€¢ Notification Svc â”‚
â”‚                      â”‚      â”‚   â€¢ Analytics        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â€¢ Export Service   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    â”‚                    â”‚
                    â–¼                    â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   DATABASE         â”‚  â”‚   WORKER     â”‚  â”‚  NOTIFICATION    â”‚
        â”‚   PostgreSQL 14+   â”‚  â”‚   QUEUE      â”‚  â”‚  SERVICE         â”‚
        â”‚                    â”‚  â”‚              â”‚  â”‚                  â”‚
        â”‚   Tables:          â”‚  â”‚  - BullMQ    â”‚  â”‚  - Email (SMTP)  â”‚
        â”‚   â€¢ users          â”‚  â”‚  - Redis     â”‚  â”‚  - SMS (future)  â”‚
        â”‚   â€¢ vehicles       â”‚  â”‚              â”‚  â”‚  - Push (future) â”‚
        â”‚   â€¢ charge_sessionsâ”‚  â”‚  Jobs:       â”‚  â”‚                  â”‚
        â”‚   â€¢ odometer_read..â”‚  â”‚  â€¢ Send      â”‚  â”‚  Templates:      â”‚
        â”‚   â€¢ user_vehicles  â”‚  â”‚    notific.. â”‚  â”‚  â€¢ New charge    â”‚
        â”‚   â€¢ stations       â”‚  â”‚  â€¢ Reminders â”‚  â”‚  â€¢ Reminders     â”‚
        â”‚   â€¢ tariffs        â”‚  â”‚  â€¢ Reports   â”‚  â”‚  â€¢ Reports       â”‚
        â”‚   â€¢ notifications  â”‚  â”‚              â”‚  â”‚                  â”‚
        â”‚   â€¢ audit_logs     â”‚  â”‚              â”‚  â”‚                  â”‚
        â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   BACKUP/STORAGE   â”‚
        â”‚   - Daily backups  â”‚
        â”‚   - Audit archives â”‚
        â”‚   - Export files   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµĞ½ ÑÑ‚ĞµĞº

### ĞŸÑ€ĞµĞ¿Ğ¾Ñ€ÑŠÑ‡Ğ¸Ñ‚ĞµĞ»Ğ½Ğ° Ğ¸Ğ¼Ğ¿Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

#### Option A: Node.js Stack (ĞŸÑ€ĞµĞ¿Ğ¾Ñ€ÑŠÑ‡Ğ¸Ñ‚ĞµĞ»Ğ½Ğ° Ğ·Ğ° Ğ±ÑŠÑ€Ğ·Ğ¾ Ğ²Ğ½ĞµĞ´Ñ€ÑĞ²Ğ°Ğ½Ğµ)

**Backend:**
- **Runtime:** Node.js 20 LTS
- **Framework:** NestJS (Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ½Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°, Ğ²Ğ³Ñ€Ğ°Ğ´ĞµĞ½ TypeScript, dependency injection)
- **API Style:** REST (OpenAPI/Swagger Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ)
- **ORM:** TypeORM / Prisma
- **Validation:** class-validator, class-transformer
- **Authentication:** Passport.js (Local + OIDC ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸)
- **Job Queue:** BullMQ + Redis
- **Email:** Nodemailer

**Frontend:**
- **Framework:** React 18+ Ñ TypeScript
- **Build Tool:** Vite
- **UI Components:** shadcn/ui (Radix UI + Tailwind CSS)
- **State Management:** React Query (TanStack Query)
- **Forms:** React Hook Form + Zod validation
- **Charts:** Recharts / Chart.js
- **Tables:** TanStack Table
- **Routing:** React Router v6

**Database:**
- PostgreSQL 14+
- Redis (Ğ·Ğ° ĞºĞµÑˆ Ğ¸ job queue)

**Infrastructure:**
- **Web Server:** Nginx (reverse proxy, static files)
- **Process Manager:** PM2
- **Container (optional):** Docker + Docker Compose

#### Option B: .NET Stack (Ğ—Ğ° enterprise ÑÑ€ĞµĞ´Ğ°)

**Backend:**
- .NET 8
- ASP.NET Core Web API
- Entity Framework Core
- MediatR (CQRS pattern)
- FluentValidation
- Hangfire (background jobs)

**Frontend:** Ğ¡ÑŠÑ‰Ğ¾Ñ‚Ğ¾ ĞºĞ°Ñ‚Ğ¾ Option A

#### Option C: Python Stack (Ğ—Ğ° data science Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸)

**Backend:**
- Python 3.11+
- FastAPI
- SQLAlchemy 2.0
- Pydantic
- Celery + Redis
- Python-JOSE (JWT)

**Frontend:** Ğ¡ÑŠÑ‰Ğ¾Ñ‚Ğ¾ ĞºĞ°Ñ‚Ğ¾ Option A

## ğŸ—ï¸ ĞœĞ¾Ğ´ÑƒĞ»Ğ½Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ½Ğ° Backend

```
ecar-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auth/                    # Authentication & Authorization
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”‚   â”œâ”€â”€ local.strategy.ts
â”‚   â”‚   â”‚   â””â”€â”€ oidc.strategy.ts
â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt-auth.guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ roles.guard.ts
â”‚   â”‚   â””â”€â”€ decorators/
â”‚   â”‚       â””â”€â”€ roles.decorator.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ users/                   # User Management
â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â”œâ”€â”€ entities/user.entity.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ create-user.dto.ts
â”‚   â”‚       â””â”€â”€ update-user.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ vehicles/                # Vehicle Management
â”‚   â”‚   â”œâ”€â”€ vehicles.controller.ts
â”‚   â”‚   â”œâ”€â”€ vehicles.service.ts
â”‚   â”‚   â”œâ”€â”€ entities/vehicle.entity.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚
â”‚   â”œâ”€â”€ charge-sessions/         # Charging Session Management
â”‚   â”‚   â”œâ”€â”€ charge-sessions.controller.ts
â”‚   â”‚   â”œâ”€â”€ charge-sessions.service.ts
â”‚   â”‚   â”œâ”€â”€ entities/charge-session.entity.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚
â”‚   â”œâ”€â”€ odometer/                # Odometer Management
â”‚   â”‚   â”œâ”€â”€ odometer.controller.ts
â”‚   â”‚   â”œâ”€â”€ odometer.service.ts
â”‚   â”‚   â”œâ”€â”€ entities/odometer-reading.entity.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚
â”‚   â”œâ”€â”€ notifications/           # Notification Service
â”‚   â”‚   â”œâ”€â”€ notifications.service.ts
â”‚   â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”‚   â”œâ”€â”€ new-charge.hbs
â”‚   â”‚   â”‚   â””â”€â”€ odometer-reminder.hbs
â”‚   â”‚   â””â”€â”€ entities/notification.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ analytics/               # Analytics & Reporting
â”‚   â”‚   â”œâ”€â”€ analytics.controller.ts
â”‚   â”‚   â”œâ”€â”€ analytics.service.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ consumption-report.dto.ts
â”‚   â”‚       â””â”€â”€ cost-report.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ stations/                # Charging Stations
â”‚   â”‚   â”œâ”€â”€ stations.controller.ts
â”‚   â”‚   â”œâ”€â”€ stations.service.ts
â”‚   â”‚   â””â”€â”€ entities/station.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ tariffs/                 # Tariff Management
â”‚   â”‚   â”œâ”€â”€ tariffs.controller.ts
â”‚   â”‚   â”œâ”€â”€ tariffs.service.ts
â”‚   â”‚   â””â”€â”€ entities/tariff.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ audit/                   # Audit Trail
â”‚   â”‚   â”œâ”€â”€ audit.service.ts
â”‚   â”‚   â”œâ”€â”€ audit.interceptor.ts
â”‚   â”‚   â””â”€â”€ entities/audit-log.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ jobs/                    # Background Jobs
â”‚   â”‚   â”œâ”€â”€ jobs.module.ts
â”‚   â”‚   â”œâ”€â”€ notification.processor.ts
â”‚   â”‚   â”œâ”€â”€ reminder.processor.ts
â”‚   â”‚   â””â”€â”€ report.processor.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ common/                  # Shared Code
â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚   â”‚   â”œâ”€â”€ filters/
â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                  # Configuration
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”œâ”€â”€ auth.config.ts
â”‚   â”‚   â””â”€â”€ email.config.ts
â”‚   â”‚
â”‚   â””â”€â”€ main.ts
â”‚
â”œâ”€â”€ test/
â”œâ”€â”€ migrations/
â”œâ”€â”€ seeders/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸŒ Frontend ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
ecar-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                     # App Setup
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ router.tsx
â”‚   â”‚   â””â”€â”€ providers.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                # Feature Modules
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚   â”‚       â””â”€â”€ authApi.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ vehicles/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VehicleList.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VehicleForm.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ VehicleCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useVehicles.ts
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â”œâ”€â”€ VehiclesPage.tsx
â”‚   â”‚   â”‚       â””â”€â”€ VehicleDetailsPage.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ charging/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionList.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionForm.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OdometerForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useChargeSessions.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useOdometerEntry.ts
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â”œâ”€â”€ AdminSessionsPage.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ DriverSessionsPage.tsx
â”‚   â”‚   â”‚       â””â”€â”€ OdometerEntryPage.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KPICard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConsumptionChart.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CostChart.tsx
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â”œâ”€â”€ AdminDashboard.tsx
â”‚   â”‚   â”‚       â””â”€â”€ DriverDashboard.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportFilters.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportTable.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ExportButton.tsx
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â””â”€â”€ ReportsPage.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚       â”‚   â”œâ”€â”€ UserManagement.tsx
â”‚   â”‚       â”‚   â””â”€â”€ SystemSettings.tsx
â”‚   â”‚       â””â”€â”€ pages/
â”‚   â”‚           â””â”€â”€ AdminPanel.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                  # Shared Components
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui components
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatePicker.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Select.tsx
â”‚   â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚   â”‚       â”œâ”€â”€ Loading.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useDebounce.ts
â”‚   â”‚   â”‚   â””â”€â”€ useLocalStorage.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ format.ts
â”‚   â”‚       â”œâ”€â”€ validation.ts
â”‚   â”‚       â””â”€â”€ api-client.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                     # Core Libraries
â”‚   â”‚   â”œâ”€â”€ api-client.ts
â”‚   â”‚   â”œâ”€â”€ query-client.ts
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # TypeScript Types
â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”œâ”€â”€ entities.types.ts
â”‚   â”‚   â””â”€â”€ common.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ icons/
â”‚   â”‚
â”‚   â””â”€â”€ styles/
â”‚       â”œâ”€â”€ globals.css
â”‚       â””â”€â”€ variables.css
â”‚
â”œâ”€â”€ public/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ README.md
```

## ğŸ”’ Authentication & Authorization

### ĞĞ¿Ñ†Ğ¸Ğ¸ Ğ·Ğ° Auth

#### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ›Ğ¾ĞºĞ°Ğ»Ğ½Ğ¸ Ğ°ĞºĞ°ÑƒĞ½Ñ‚Ğ¸ (MVP)
- **JWT tokens** (Access + Refresh)
- **Password hashing:** bcrypt/argon2
- **Session management:** Redis (Ğ·Ğ° refresh tokens)
- **Password policy:** Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°, ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚

#### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: OIDC/SSO (Enterprise)
- **Providers:** Azure AD, Keycloak, Auth0
- **Protocol:** OAuth 2.0 + OpenID Connect
- **Fallback:** Ğ›Ğ¾ĞºĞ°Ğ»Ğ½Ğ¸ Ğ°ĞºĞ°ÑƒĞ½Ñ‚Ğ¸ Ğ·Ğ° emergency access

### RBAC Ğ¼Ğ¾Ğ´ĞµĞ»

```typescript
enum Role {
  ADMIN = 'admin',
  FLEET_MANAGER = 'fleet_manager',
  DRIVER = 'driver'
}

interface Permission {
  resource: string;
  actions: ('create' | 'read' | 'update' | 'delete')[];
}

const rolePermissions: Record<Role, Permission[]> = {
  [Role.ADMIN]: [
    { resource: 'users', actions: ['create', 'read', 'update', 'delete'] },
    { resource: 'vehicles', actions: ['create', 'read', 'update', 'delete'] },
    { resource: 'charge_sessions', actions: ['create', 'read', 'update', 'delete'] },
    { resource: 'odometer', actions: ['read', 'update'] },
    { resource: 'reports', actions: ['read', 'create'] },
    { resource: 'stations', actions: ['create', 'read', 'update', 'delete'] },
    { resource: 'tariffs', actions: ['create', 'read', 'update', 'delete'] },
    { resource: 'audit_logs', actions: ['read'] }
  ],
  
  [Role.FLEET_MANAGER]: [
    { resource: 'users', actions: ['read'] },
    { resource: 'vehicles', actions: ['read', 'update'] },
    { resource: 'charge_sessions', actions: ['create', 'read', 'update'] },
    { resource: 'odometer', actions: ['read', 'update'] },
    { resource: 'reports', actions: ['read', 'create'] },
    { resource: 'stations', actions: ['read'] },
    { resource: 'tariffs', actions: ['read'] }
  ],
  
  [Role.DRIVER]: [
    { resource: 'vehicles', actions: ['read'] }, // ÑĞ°Ğ¼Ğ¾ assigned
    { resource: 'charge_sessions', actions: ['read'] }, // ÑĞ°Ğ¼Ğ¾ ÑĞ²Ğ¾Ğ¸
    { resource: 'odometer', actions: ['create', 'update'] }, // ÑĞ°Ğ¼Ğ¾ ÑĞ²Ğ¾Ğ¸
    { resource: 'reports', actions: ['read'] } // ÑĞ°Ğ¼Ğ¾ ÑĞ²Ğ¾Ğ¸
  ]
};
```

## ğŸ“¡ API Design

### REST API Endpoints

```
# Authentication
POST   /api/v1/auth/login
POST   /api/v1/auth/logout
POST   /api/v1/auth/refresh
GET    /api/v1/auth/me

# Users
GET    /api/v1/users
POST   /api/v1/users
GET    /api/v1/users/:id
PATCH  /api/v1/users/:id
DELETE /api/v1/users/:id
GET    /api/v1/users/:id/vehicles

# Vehicles
GET    /api/v1/vehicles
POST   /api/v1/vehicles
GET    /api/v1/vehicles/:id
PATCH  /api/v1/vehicles/:id
DELETE /api/v1/vehicles/:id
GET    /api/v1/vehicles/:id/sessions
GET    /api/v1/vehicles/:id/odometer-history
GET    /api/v1/vehicles/:id/analytics

# Charge Sessions
GET    /api/v1/charge-sessions
POST   /api/v1/charge-sessions
GET    /api/v1/charge-sessions/:id
PATCH  /api/v1/charge-sessions/:id
DELETE /api/v1/charge-sessions/:id
GET    /api/v1/charge-sessions/pending-odometer
POST   /api/v1/charge-sessions/:id/complete
POST   /api/v1/charge-sessions/:id/cancel

# Odometer
GET    /api/v1/odometer/readings
POST   /api/v1/odometer/readings
GET    /api/v1/odometer/readings/:id
GET    /api/v1/odometer/vehicle/:vehicleId/latest
POST   /api/v1/odometer/submit/:sessionId

# Stations
GET    /api/v1/stations
POST   /api/v1/stations
GET    /api/v1/stations/:id
PATCH  /api/v1/stations/:id
DELETE /api/v1/stations/:id

# Tariffs
GET    /api/v1/tariffs
POST   /api/v1/tariffs
GET    /api/v1/tariffs/:id
PATCH  /api/v1/tariffs/:id
DELETE /api/v1/tariffs/:id

# Analytics & Reports
GET    /api/v1/analytics/consumption
GET    /api/v1/analytics/costs
GET    /api/v1/analytics/vehicles/:id/summary
GET    /api/v1/analytics/fleet-summary
POST   /api/v1/reports/export

# Notifications
GET    /api/v1/notifications
GET    /api/v1/notifications/:id
PATCH  /api/v1/notifications/:id/mark-seen

# Audit
GET    /api/v1/audit/logs
GET    /api/v1/audit/logs/:id
```

### API Response Format

```typescript
// Success Response
{
  "success": true,
  "data": { ... },
  "meta": {
    "timestamp": "2025-11-27T10:30:00Z",
    "requestId": "uuid"
  }
}

// Paginated Response
{
  "success": true,
  "data": [ ... ],
  "meta": {
    "page": 1,
    "perPage": 20,
    "total": 150,
    "totalPages": 8,
    "timestamp": "2025-11-27T10:30:00Z"
  }
}

// Error Response
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": [
      {
        "field": "kwh",
        "message": "Must be a positive number"
      }
    ]
  },
  "meta": {
    "timestamp": "2025-11-27T10:30:00Z",
    "requestId": "uuid"
  }
}
```

## ğŸš€ Deployment Architecture

### Ğ›Ğ¾ĞºĞ°Ğ»Ğ½Ğ° VM ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```yaml
# docker-compose.yml
version: '3.8'

services:
  # PostgreSQL Database
  postgres:
    image: postgres:14-alpine
    container_name: ecar-db
    environment:
      POSTGRES_DB: ecar
      POSTGRES_USER: ecar_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./migrations:/docker-entrypoint-initdb.d
    ports:
      - "5432:5432"
    restart: unless-stopped

  # Redis (Cache & Queue)
  redis:
    image: redis:7-alpine
    container_name: ecar-redis
    command: redis-server --requirepass ${REDIS_PASSWORD}
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
    restart: unless-stopped

  # Backend API
  api:
    build: ./backend
    container_name: ecar-api
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://ecar_user:${DB_PASSWORD}@postgres:5432/ecar
      REDIS_URL: redis://:${REDIS_PASSWORD}@redis:6379
      JWT_SECRET: ${JWT_SECRET}
      SMTP_HOST: ${SMTP_HOST}
      SMTP_PORT: ${SMTP_PORT}
      SMTP_USER: ${SMTP_USER}
      SMTP_PASSWORD: ${SMTP_PASSWORD}
    depends_on:
      - postgres
      - redis
    ports:
      - "3000:3000"
    restart: unless-stopped

  # Background Worker
  worker:
    build: ./backend
    container_name: ecar-worker
    command: npm run worker
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://ecar_user:${DB_PASSWORD}@postgres:5432/ecar
      REDIS_URL: redis://:${REDIS_PASSWORD}@redis:6379
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  # Frontend
  frontend:
    build: ./frontend
    container_name: ecar-frontend
    volumes:
      - frontend_dist:/usr/share/nginx/html
    restart: unless-stopped

  # Nginx Reverse Proxy
  nginx:
    image: nginx:alpine
    container_name: ecar-nginx
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro
      - frontend_dist:/usr/share/nginx/html:ro
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - api
      - frontend
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
  frontend_dist:
```

### Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```nginx
# nginx.conf
upstream api_backend {
    server api:3000;
}

server {
    listen 80;
    server_name ecar.company.local;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name ecar.company.local;

    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # Frontend SPA
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api/ {
        proxy_pass http://api_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
}
```

## ğŸ“Š Monitoring & Observability

### Logging
- **Format:** JSON structured logs
- **Levels:** DEBUG, INFO, WARN, ERROR
- **Output:** stdout + Ñ„Ğ°Ğ¹Ğ» Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ (logrotate)
- **Library:** Winston (Node.js) / Serilog (.NET) / structlog (Python)

### Metrics (Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾)
- Ğ‘Ñ€Ğ¾Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»Ğ¸
- Ğ‘Ñ€Ğ¾Ğ¹ ÑĞµÑĞ¸Ğ¸ Ğ½Ğ° Ğ´ĞµĞ½
- Ğ‘Ñ€Ğ¾Ğ¹ pending Ğ¾Ğ´Ğ¾Ğ¼ĞµÑ‚Ñ€Ğ¸
- API response times
- Database connection pool status

### Alerts
- ĞĞµÑƒÑĞ¿ĞµÑˆĞ½Ğ¸ Ğ½Ğ¾Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ > 10 Ğ·Ğ° 1 Ñ‡Ğ°Ñ
- Database connection errors
- Disk space < 20%
- Pending Ğ¾Ğ´Ğ¾Ğ¼ĞµÑ‚Ñ€Ğ¸ > 48 Ñ‡Ğ°ÑĞ°

---

**Ğ¡Ğ»ĞµĞ´Ğ²Ğ°Ñ‰Ğ° ÑÑ‚ÑŠĞ¿ĞºĞ°:** ER Ğ¼Ğ¾Ğ´ĞµĞ» Ğ¸ SQL ÑÑ…ĞµĞ¼Ğ°
